# This workflow reads a text file and outputs distinct values of a given field.
#
# Example command-line usage:
# kurator -f workflows/vocab_appender.yaml -p p=fullpath -p v=../../vocabularies/basisOfRecord.csv -p n='a, b, c'

imports:

- classpath:/org/kurator/akka/actors.yaml
- classpath:/org/kurator/validation/actors/dwca/actors.yaml

components:

- id: WorkflowPrimer
  type: PythonActor
  properties:
    script: workflow_primer.py
    onStart: workflow_primer
    parameters:
      outputTypeIsInputType: true

- id: VocabAppender
  type: PythonActor
  properties:
    script: vocab_appender.py
    onData: vocab_appender
    listensTo:
      - !ref WorkflowPrimer
    parameters:
      outputTypeIsInputType: true

- id: VocabAppenderWorkflow
  type: Workflow
  properties:
    actors:
      - !ref WorkflowPrimer
      - !ref VocabAppender
    parameters:
      p:
        actor: !ref WorkflowPrimer
        parameter: wfparameter
      v:
        actor: !ref WorkflowPrimer
        parameter: wfvalue
      n:
        actor: !ref VocabAppender
        parameter: newvaluelist
