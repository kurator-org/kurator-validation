# This workflow reads a Darwin Core Archive file and writes its core file to a TSV
#
# Example command-line usage:
# kurator -f dwca_core_to_tsv.yaml -p inputfile=../../data/dwca-uwymv_herp.zip -p outputfile=testout.tsv -p type=standard

imports:

- classpath:/org/kurator/akka/actors.yaml
- classpath:/org/kurator/validation/actors/dwca/actors.yaml

components:

- id: DWCAtoTSVWriter
  type: PythonActor
  properties:
    script: dwca_core_to_tsv.py
    onStart: dwca_core_to_tsv
    parameters:
      outputTypeIsInputType: true

- id: DWCAtoTSVWorkflow
  type: Workflow
  properties:
    actors:
      - !ref DWCAtoTSVWriter
    parameters:
      inputfile:
        actor: !ref DWCAtoTSVWriter
        parameter: inputfile
      outputfile:
        actor: !ref DWCAtoTSVWriter
        parameter: outputfile
      type:
        actor: !ref DWCAtoTSVWriter
        parameter: type
